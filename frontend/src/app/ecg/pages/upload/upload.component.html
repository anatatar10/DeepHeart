<div class="upload-page">
  <div class="container">
    <div class="section-header">
      <h2>ECG Upload & Analysis</h2>
      <p class="section-subtitle">Upload ECG images for AI-powered classification</p>
    </div>

    <!-- Upload and Results Grid -->
    <div class="upload-grid">
      <!-- Upload Card -->
      <div class="card upload-card">
        <div class="card__body">
          <div class="upload-area" (click)="fileInput.click()">
            <div class="upload-icon">üìÅ</div>
            <h3>Drag & Drop ECG Images</h3>
            <p>Or click to browse files</p>
            <input type="file" #fileInput (change)="onFileSelected($event)" hidden />
            <button class="btn btn--primary">Select Files</button>
          </div>

          <div class="upload-progress" *ngIf="loading">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 100%"></div>
            </div>
            <p>Uploading...</p>
          </div>
        </div>
      </div>

      <!-- Results Card -->
      <div class="card results-card">
        <div class="card__body">
          <h3>Classification Results</h3>
          <div class="results-content">
            <p class="empty-state" *ngIf="!predictions">Upload an ECG image to see classification results</p>
            <div *ngIf="predictions">
              <div *ngFor="let key of predictionKeys()" class="classification-result">
                <div class="result-header">
                  <span class="result-class">{{ key }}</span>
                  <span class="result-confidence">{{ predictions[key] | percent: '1.0-2' }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Patient Info BELOW the grid -->
    <div class="card patient-box">
      <div class="card__body">
        <h3>Patient Information</h3>
        <label for="patient">Select Patient</label>
        <select id="patient" class="form-control">
          <option>Select a patient...</option>
        </select>
        <button class="btn btn--primary add-btn">+ Add New Patient</button>
      </div>
    </div>
  </div>
</div>
